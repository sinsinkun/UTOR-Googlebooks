(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{61:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(9),i=n.n(a),s=n(33),o=n(11),j=n(111),l=(n(61),n(100)),u=n(104),b=n(105),h=n(70),d=n(3);var O=function(){return Object(d.jsx)(l.a,{position:"static",className:"navbar",children:Object(d.jsxs)(u.a,{children:[Object(d.jsx)(b.a,{variant:"h6",children:"Google Books Search"}),Object(d.jsxs)("div",{style:{marginLeft:"auto"},children:[Object(d.jsx)(s.b,{to:"/",children:Object(d.jsx)(h.a,{color:"inherit",children:"Search"})}),Object(d.jsx)(s.b,{to:"/saved",children:Object(d.jsx)(h.a,{color:"inherit",children:"Saved"})})]})]})})},x=n(17),f=n.n(x),p=n(22),m=n(21),v=n(108),k=n(109),g=n(106),y=n(112),w=n(110),S=n(51),R=n(107);var N=function(e){function t(){return(t=Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("trying to save book",e.bookid),t.next=3,fetch("/api/saved",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.book)}).then((function(e){return e.text()}));case 3:n=t.sent,console.log(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(d.jsx)(g.a,{item:!0,xs:12,sm:6,md:4,children:Object(d.jsxs)(S.a,{elevation:3,className:"book-card",children:[Object(d.jsx)(b.a,{variant:"h6",children:e.book.title}),Object(d.jsx)(g.a,{container:!0,justify:"center",children:e.book.imageLinks?Object(d.jsx)("img",{src:e.book.imageLinks.thumbnail,alt:e.book.title}):Object(d.jsx)(b.a,{variant:"subtitle2",children:"(No thumbnail)"})}),Object(d.jsxs)(b.a,{variant:"subtitle2",children:["Author(s): ",function(){if(e.book.authors){var t="";return e.book.authors.map((function(n,r){return r<e.book.authors.length-1?t+=n+", ":t+=n,null})),t}return"(Unknown)"}()]}),Object(d.jsx)(b.a,{variant:"body2",children:e.book.description?e.book.description.length>180?e.book.description.slice(0,177)+"...":e.description:"(No description)"}),Object(d.jsxs)(R.a,{variant:"text",fullWidth:!0,children:[Object(d.jsx)(h.a,{href:e.book.previewLink,children:"Read"}),Object(d.jsx)(h.a,{onClick:function(){return t.apply(this,arguments)},children:"Save"})]})]})})},E=n(50),L=[],T=function(e,t){switch(t.type){case"POST":return t.data;case"CLEAR":return[];default:throw new Error("Invalid action type: ".concat(t.type))}},C=Object(r.createContext)(),P=function(e){var t=Object(r.useReducer)(T,L),n=Object(m.a)(t,2),c=n[0],a=n[1];return Object(d.jsx)(C.Provider,Object(E.a)({value:[c,a]},e))};var B=function(){var e=Object(r.useContext)(C),t=Object(m.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(m.a)(a,2),s=i[0],o=i[1],j=Object(r.useState)(!1),l=Object(m.a)(j,2),u=l[0],O=l[1],x=Object(r.useRef)(null),S=Object(r.useRef)(null),R=Object(r.useRef)(null);function E(){return L.apply(this,arguments)}function L(){return(L=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Searching for",x.current.value),O(!0),e.next=4,fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(x.current.value,"&orderBy=newest&langRestrict=en&maxResults=9")).then((function(e){return e.json()}));case 4:t=e.sent,O(!1),t.error?(console.log("ERROR CODE:",t.error.code,t.error.message),c({type:"POST",data:[]})):t.totalItems<9?c({type:"POST",data:[]}):c({type:"POST",data:t.items});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){n.length>1&&o(!0)}),[n]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(k.a,{className:"search-area",ref:S,children:[Object(d.jsx)(b.a,{variant:"h6",children:"Search"}),Object(d.jsxs)(g.a,{container:!0,spacing:1,justify:"center",alignItems:"flex-end",children:[Object(d.jsx)(g.a,{item:!0,children:Object(d.jsx)(w.a,{})}),Object(d.jsx)(g.a,{item:!0,xs:8,sm:9,md:10,children:Object(d.jsx)(y.a,{placeholder:"Enter keywords here",fullWidth:!0,inputRef:x,onKeyUp:function(e){return function(e){"Enter"===e.key&&E()}(e)}})}),Object(d.jsx)(g.a,{item:!0,children:Object(d.jsx)(h.a,{color:"primary",onClick:E,children:"Search"})})]})]}),Object(d.jsxs)(k.a,{className:"search-results",ref:R,children:[Object(d.jsx)(b.a,{variant:"h6",style:{marginBottom:"0.5rem"},children:"Results"}),Object(d.jsx)(g.a,{container:!0,spacing:1,justify:"center",children:s?function(e){return e?Object(d.jsx)(v.a,{}):n.length<1?Object(d.jsx)(b.a,{variant:"body1",children:"No results found. Try a different search term."}):n.map((function(e){return Object(d.jsx)(N,{bookid:e.id,book:e.volumeInfo})}))}(u):Object(d.jsx)(b.a,{variant:"body1",children:"Nothing to display"})})]})]})};var I=function(e){function t(){return(t=Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("trying to remove entry",e.bookid),t.next=3,fetch("/api/saved/".concat(e.bookid),{method:"DELETE"}).then((function(e){return e.text()}));case 3:n=t.sent,e.setRerender((function(e){return!e})),console.log(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(d.jsx)(g.a,{item:!0,xs:12,sm:6,md:4,children:Object(d.jsxs)(S.a,{elevation:3,className:"book-card",children:[Object(d.jsx)(b.a,{variant:"h6",children:e.book.title}),Object(d.jsx)(g.a,{container:!0,justify:"center",children:e.book.imageLinks?Object(d.jsx)("img",{src:e.book.imageLinks.thumbnail,alt:e.book.title}):Object(d.jsx)(b.a,{variant:"subtitle2",children:"(No thumbnail)"})}),Object(d.jsxs)(b.a,{variant:"subtitle2",children:["Author(s): ",function(){if(e.book.authors){var t="";return e.book.authors.map((function(n,r){return r<e.book.authors.length-1?t+=n+", ":t+=n,null})),t}return"(Unknown)"}()]}),Object(d.jsx)(b.a,{variant:"body2",children:e.book.description?e.book.description.length>180?e.book.description.slice(0,177)+"...":e.description:"(No description)"}),Object(d.jsxs)(R.a,{variant:"text",fullWidth:!0,children:[Object(d.jsx)(h.a,{href:e.book.previewLink,children:"Read"}),Object(d.jsx)(h.a,{onClick:function(){return t.apply(this,arguments)},children:"Delete"})]})]})})};var W=function(){var e=Object(r.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!0),i=Object(m.a)(a,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching saved data"),e.next=3,fetch("./api/saved").then((function(e){return e.json()}));case 3:t=e.sent,console.log(t),c(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(k.a,{className:"saved-area",children:[Object(d.jsx)(b.a,{variant:"h6",style:{marginBottom:"0.5rem"},children:"Saved"}),Object(d.jsx)(g.a,{container:!0,spacing:1,justify:"center",children:n.length<1?Object(d.jsx)(b.a,{children:"There's nothing here right now"}):n.map((function(e){return Object(d.jsx)(I,{setRerender:o,bookid:e._id,book:e})}))})]})})};var A=function(){return Object(d.jsxs)(s.a,{children:[Object(d.jsx)(O,{}),Object(d.jsx)(P,{children:Object(d.jsx)(j.a,{maxWidth:"md",className:"main-body",children:Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{exact:!0,path:"/",children:Object(d.jsx)(B,{})}),Object(d.jsx)(o.a,{path:"/saved",children:Object(d.jsx)(W,{})})]})})})]})};i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(A,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.4019e88f.chunk.js.map